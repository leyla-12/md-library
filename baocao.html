<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Báo cáo & thống kê - Thư viện THCS Mai Dịch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- dùng lại style chung -->
  <link rel="stylesheet" href="style.css" />

  <style>
    /* chỉ thêm mấy cái riêng cho báo cáo */
    .report-toolbar {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 18px;
      flex-wrap: wrap;
    }
    .report-toolbar label {
      font-size: 13px;
      color: #4a5568;
    }
    .report-toolbar input[type="date"] {
      background: #fff;
      border: 1px solid #d0d7e2;
      border-radius: 8px;
      padding: 6px 10px;
      font-size: 13px;
    }
    .btn-filter {
      background: #1678F2;
      color: #fff;
      border: none;
      padding: 7px 16px;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
    }
    .btn-export {
      background: #1ea97c;
      color: #fff;
      border: none;
      padding: 7px 16px;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
    }
    .report-tabs {
      display: flex;
      gap: 12px;
      margin-bottom: 18px;
    }
    .report-tab {
      background: #f3f6fb;
      border: 1px solid transparent;
      padding: 9px 18px;
      border-radius: 999px;
      font-size: 14px;
      color: #4a5568;
      cursor: pointer;
    }
    .report-tab.active {
      background: #fff;
      border-color: rgba(22,120,242,0.25);
      color: #0f172a;
      font-weight: 600;
      box-shadow: 0 6px 16px rgba(15,133,255,0.05);
    }
    .report-card {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 6px 16px rgba(21, 94, 171, 0.03);
      border: 1px solid rgba(216, 226, 239, 0.7);
      padding: 18px 20px;
      margin-bottom: 20px;
    }
    .report-title-sm {
      font-weight: 600;
      margin-bottom: 8px;
      color: #111827;
    }
    .table-report {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }
    .table-report thead {
      background: #eff4fb;
    }
    .table-report th,
    .table-report td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #edf2f7;
    }
    .badge-status {
      display: inline-block;
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
    }
    .badge-primary { background: #e5efff; color: #1a5ed7; }
    .badge-success { background: #e7f6ef; color: #179f5c; }
    .badge-danger { background: #ffe4e4; color: #d33535; }

    /* ẩn/hiện 3 phần */
    .report-panel { display: none; }
    .report-panel.active { display: block; }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- sidebar -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <div class="lib-title">THƯ VIỆN<br/>Trường THCS Mai Dịch</div>
      </div>
      <nav class="sidebar-nav">
        <a href="docgia.html" class="nav-link">
          <span>Độc giả</span>
        </a>
        <a href="sach.html" class="nav-link">
          <span>Sách</span>
        </a>
        <a href="phieumuon.html" class="nav-link">
          <span>Phiếu mượn</span>
        </a>
        <a href="baocao.html" class="nav-link active">
          <span>Báo cáo</span>
        </a>
      </nav>
      <a href="index.html" class="btn-logout">Đăng xuất</a>
    </aside>

    <!-- nội dung -->
    <main class="main-content">
      <header class="page-header">
        <div>
          <h1 class="page-title">Báo cáo & thống kê</h1>
          <p class="page-subtitle">Hệ thống &gt; Báo cáo thống kê</p>
        </div>
      </header>

      <section class="page-body">
        <!-- thanh chọn loại báo cáo -->
        <div class="report-tabs">
          <button class="report-tab active" data-target="rp-dang-muon">Báo cáo sách đang được mượn</button>
          <button class="report-tab" data-target="rp-doc-gia">Báo cáo độc giả mượn nhiều</button>
          <button class="report-tab" data-target="rp-thang">Báo cáo tháng mượn nhiều nhất</button>
        </div>

        <!-- bộ lọc chung -->
        <div class="report-toolbar report-card">
          <div>
            <label for="from">Từ ngày:</label>
            <input type="date" id="from" />
          </div>
          <div>
            <label for="to">Đến ngày:</label>
            <input type="date" id="to" />
          </div>
          <button class="btn-filter">Lọc</button>
          <button class="btn-export">Xuất Excel</button>
        </div>

        <!-- 1. Báo cáo sách đang được mượn -->
        <div id="rp-dang-muon" class="report-panel active">
          <div class="report-card">
            <p><strong>Khoảng thời gian:</strong> 01/11/2025 - 15/11/2025</p>
            <p><strong>Tổng số sách đang mượn:</strong> 27</p>
            <p><strong>Số phiếu mượn:</strong> 9</p>
          </div>

          <div class="report-card">
            <h3 class="report-title-sm">Danh sách sách đang mượn</h3>
            <table class="table-report">
              <thead>
                <tr>
                  <th>Mã phiếu</th>
                  <th>Độc giả</th>
                  <th>Tên sách</th>
                  <th>Hạn trả</th>
                  <th>Trạng thái</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>PM001</td>
                  <td>Nguyễn Minh An (9A1)</td>
                  <td>Văn học 6 - Tập 1</td>
                  <td>2025-11-15</td>
                  <td><span class="badge-status badge-primary">Đang mượn</span></td>
                </tr>
                <tr>
                  <td>PM002</td>
                  <td>Trần Thu Hà (8B2)</td>
                  <td>Bài tập Toán 7</td>
                  <td>2025-11-10</td>
                  <td><span class="badge-status badge-success">Đã trả</span></td>
                </tr>
                <tr>
                  <td>PM003</td>
                  <td>Đỗ Thị Lan (GV)</td>
                  <td>Khám phá khoa học</td>
                  <td>2025-11-05</td>
                  <td><span class="badge-status badge-danger">Quá hạn</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 2. Báo cáo độc giả mượn nhiều -->
        <div id="rp-doc-gia" class="report-panel">
          <div class="report-card">
            <p><strong>Kỳ thống kê:</strong> 01/10/2025 - 31/10/2025</p>
            <p><strong>Độc giả mượn nhiều nhất:</strong> 8 lượt/kỳ</p>
          </div>

          <div class="report-card">
            <h3 class="report-title-sm">Top độc giả mượn nhiều</h3>
            <table class="table-report">
              <thead>
                <tr>
                  <th>STT</th>
                  <th>Mã độc giả</th>
                  <th>Họ tên</th>
                  <th>Lớp / Chức vụ</th>
                  <th>Số lượt mượn</th>
                  <th>Tỷ lệ</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>DG001</td>
                  <td>Nguyễn Minh An</td>
                  <td>9A1 - Học sinh</td>
                  <td>8</td>
                  <td>28.6%</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>DG002</td>
                  <td>Trần Thu Hà</td>
                  <td>8B2 - Học sinh</td>
                  <td>6</td>
                  <td>21.4%</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>DGGV01</td>
                  <td>Đỗ Thị Lan</td>
                  <td>Giáo viên</td>
                  <td>5</td>
                  <td>17.8%</td>
                </tr>
                <tr>
                  <td colspan="4" style="text-align:right; font-weight:600;">Tổng cộng</td>
                  <td>19</td>
                  <td>100%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 3. Báo cáo tháng được mượn nhiều nhất -->
        <div id="rp-thang" class="report-panel">
          <div class="report-card">
            <p><strong>Tháng mượn nhiều nhất:</strong> Tháng 10/2025</p>
            <p><strong>Tổng lượt mượn trong tháng:</strong> 124</p>
          </div>

          <div class="report-card">
            <h3 class="report-title-sm">Chi tiết theo tháng</h3>
            <table class="table-report">
              <thead>
                <tr>
                  <th>Tháng</th>
                  <th>Tổng lượt mượn</th>
                  <th>Số độc giả</th>
                  <th>Đầu sách mượn nhiều</th>
                  <th>Tỷ lệ so với năm</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>10/2025</td>
                  <td>124</td>
                  <td>56</td>
                  <td>Văn học 6 - Tập 1</td>
                  <td>18%</td>
                </tr>
                <tr>
                  <td>09/2025</td>
                  <td>110</td>
                  <td>49</td>
                  <td>Toán 6 - Tập 2</td>
                  <td>16%</td>
                </tr>
                <tr>
                  <td>08/2025</td>
                  <td>92</td>
                  <td>40</td>
                  <td>Khám phá khoa học</td>
                  <td>13%</td>
                </tr>
                <tr>
                  <td colspan="4" style="text-align:right; font-weight:600;">Tổng năm</td>
                  <td>100%</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </section>
    </main>
  </div>

  <script>
    // đổi tab
    const tabs = document.querySelectorAll('.report-tab');
    const panels = document.querySelectorAll('.report-panel');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        const target = tab.getAttribute('data-target');
        panels.forEach(p => {
          if (p.id === target) p.classList.add('active');
          else p.classList.remove('active');
        });
      });
    });
  </script>
</body>
</html>
